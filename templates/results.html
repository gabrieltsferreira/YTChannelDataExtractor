<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="../static/css/results.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>{{ channel_info['channel_name'] }}'s Channel Analytics</title>
</head>
<body>
    <div class="content">
        <div class="upper-content">
            <div class="channel_info_head">
                <div class="profile">
                    <div class="channel_title">
                        {{ channel_info['channel_name'] }}
                    </div>
                    <div class="profile_pic">
                        <img src=" {{ channel_info['profile_pic_url'] }} ">
                    </div>
                </div>                          
            </div>        
            <div class="channel_info_itens">
                <div class="info_item">
                    <div class="info_item_icon">
                        <i class="fa-solid fa-users"></i>
                    </div>
                    <div class="info_item_title">
                        Subscribers
                    </div>
                    <div class="info_item_display">
                        {{ channel_info['subscribers'] }}
                    </div>
                </div>

                <div class="info_item">
                    <div class="info_item_icon">
                        <i class="fa-solid fa-eye"></i>
                    </div>
                    <div class="info_item_title">
                        Total views
                    </div>
                    <div class="info_item_display">
                        {{ channel_info['total_views'] }}
                    </div>
                </div>

                <div class="info_item">
                    <div class="info_item_icon">
                        <i class="fa-solid fa-upload"></i>
                    </div>
                    <div class="info_item_title">
                        Uploads
                    </div>
                    <div class="info_item_display">
                        {{ channel_info['videos_count'] }}
                    </div>
                </div>

                <div class="info_item">
                    <div class="info_item_icon">
                        <i class="fa-solid fa-earth-americas"></i>
                    </div>
                    <div class="info_item_title">
                        Country
                    </div>
                    <div class="info_item_display">
                        {{ channel_info['country'] }}
                    </div>
                </div>
            </div>       
        </div>
        <div class="charts-content">
            <div>
                <canvas id="myChart"></canvas>
              </div>
        </div>       
    </div>
</body>    
</html>


<script type="text/javascript">
    insights = JSON.parse('{{ insights | tojson }}')

    weekdays = insights.weekdays_dist
    console.log(weekdays)
    
    const ctx = document.getElementById('myChart');
    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],
        datasets: [{
          label: '# of Votes',
          data: weekdays,
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });
  </script>